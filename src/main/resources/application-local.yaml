# =============================================================================
# LLM Gateway - 本地開發基礎設施
# =============================================================================
# Profile: local
# 用途: 本地開發環境基礎設施，使用 RabbitMQ 替代 GCP Pub/Sub
#
# 此 profile 只負責基礎設施配置 (MQ binder)
# 機敏設定由 dev profile 的 spring.config.import 載入
# =============================================================================

spring:
  cloud:
    # 停用 GCP 自動配置
    gcp:
      core:
        enabled: false
      pubsub:
        enabled: false
    stream:
      # 使用 RabbitMQ binder
      default-binder: rabbit
      bindings:
        usageEvent-out-0:
          binder: rabbit
  # RabbitMQ 配置 (本地 Docker Compose)
  rabbitmq:
    host: ${RABBITMQ_HOST:localhost}
    port: ${RABBITMQ_PORT:5672}
    username: ${RABBITMQ_USERNAME:guest}
    password: ${RABBITMQ_PASSWORD:guest}
  # 停用 GCP 自動配置 (排除自動配置類)
  autoconfigure:
    exclude:
      - com.google.cloud.spring.autoconfigure.core.GcpContextAutoConfiguration
      - com.google.cloud.spring.autoconfigure.pubsub.GcpPubSubAutoConfiguration
      - com.google.cloud.spring.autoconfigure.pubsub.GcpPubSubReactiveAutoConfiguration
