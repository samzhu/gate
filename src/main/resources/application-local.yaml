# =============================================================================
# LLM Gateway - 本地開發基礎設施
# =============================================================================
# Profile: local
# 用途: 本地開發環境基礎設施，使用 RabbitMQ 替代 GCP Pub/Sub
#
# 此 profile 只負責基礎設施配置 (MQ binder)
# 機敏設定由 dev profile 的 spring.config.import 載入
#
# 重要: 不要使用 spring.autoconfigure.exclude 排除 GCP 類別
#       這會導致 GraalVM Native Image AOT 編譯時無法註冊 Pub/Sub Binder
#       改用 spring.cloud.gcp.*.enabled=false 來禁用功能
# =============================================================================

spring:
  cloud:
    # 停用 GCP 功能 (透過 property 而非 autoconfigure.exclude)
    # 這樣 AOT 編譯時仍會註冊 Pub/Sub Binder，但本地開發時不會啟用
    gcp:
      core:
        enabled: false
      pubsub:
        enabled: false
      # 停用 Secret Manager (本地使用 application-secrets.properties)
      secretmanager:
        enabled: false
    stream:
      # 使用 RabbitMQ binder
      default-binder: rabbit
      bindings:
        usageEvent-out-0:
          binder: rabbit
  # RabbitMQ 配置 (本地 Docker Compose)
  rabbitmq:
    host: ${RABBITMQ_HOST:localhost}
    port: ${RABBITMQ_PORT:5672}
    username: ${RABBITMQ_USERNAME:guest}
    password: ${RABBITMQ_PASSWORD:guest}
